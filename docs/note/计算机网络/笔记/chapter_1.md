# 第一章 概述
## 1.1 计算机网络在信息时代中的应用
1. 21 世纪的主要特征是**数字化，网络化，信息化**，是一个**以网络为核心的信息时代**。
2. 三大类网络：
    - 电信网络：向用户提供电话，电报及传真等服务；
    - 有线电视网络：向用户传送各种电视节目；
    - 计算机网络：是用户能够在计算机之间传送数据文件。
这三种网络中发展最快，起着核心作用的是计算机网络。  
3. Internet 的译名：
    - 因特网：由全国科学技术名词审定委员会推荐；
    - 互联网：由于 Internet 是由数量极大的各种计算机网络互连起来的，采用这个名字能够体现出 Internet 最主要的特征。
4. 互联网本来就是**覆盖全球的**，仅在**局部范围**互连起来的计算机网络，只能称之为互连网。
5. 互联网之所以能够向用户提供很多服务，是因为两个重要的基本特点：**连通性**和**共享**：
    - 连通性：用户不管相距多远，都能够非常便捷和经济地交换各种信息（但是互联网具有虚拟的特点，无法知道对方的真实身份）
    - 共享：就是指资源共享。可以指信息，软件也可以是硬件共享。由于网络的存在，这些资源就好像在用户身边一样。
6. 互联网+：
    就是指“互联网+各个传统行业”，利用信息通信技术和互联网平台来创造新的发展生态。
7. 负面影响：
    - 利用互联网传播病毒，破坏数据的正常传送和交换；
    - 利用互联网窃取国家机密和盗窃银行和账户的钱财；
    - 电信诈骗，网络谣言，不良信息和不健康的视频节目；
    - 青少年沉迷网络游戏。
## 1.2 互联网概述
### 1.2.1 网络的网络
1. 现在世界上最大的覆盖全球的计算机网络起源于美国的互联网。
2. **计算机网络**（简称**网络**）由若干**节点**和连接这些节点的**链路**组成：
    - 节点：可以是计算机，集线器，交换机或路由器。
3. **互连网**：有多个网络通过一些路由器互相连接起来，构成了一个覆盖范围更大的计算机网络。因此互连网是**“网络的网络”**。
4. 主机：与网络相连的计算机。在互连网中不可缺少的路由器，是一种特殊的计算机（有中央处理器，存储器，操作系统等），但不能称为主机。
5. 基本概念：**网络把许多计算机连接在一起，而互连网则是把许多网络通过一些路由器连接在一起。与网络相连的计算机常称为主机。**
6. 网络互连：不仅仅是把计算机在物理上连接起来，这样并不能达到计算机相互交换信息的目的，必须在计算机上安装许多使计算机能够交换信息的软件。
### 1.2.2 互联网基础结构发展的三个阶段
=== "第一阶段：从单个网络 ARPANET -> 互连网"
    - 1969 年，美国国防部创建的第一个分组交换网 ARPANET 最初只是一个单一的分组交换网。所有要连接在 ARPANET 上的主机都直接与就近的节点交换机相连。
    - 在 20 世纪 70 年代，ARPA 开始研究多种网络互连的技术（如分组无线电网络），导致了互联网络的出现，是现今**互连网**的雏形。
    - 1983 年 TCP/IP 协议成为 ARPANET 上的标准协议，使得所有使用 TCP/IP 协议的计算机都能利用互连网相互通信。
    - 1983 年是互联网的诞生时间。
    - 1990 年 ARPANET 正式宣布关闭。
    - internet（互连网）是一个通用名词，它泛指由多个计算机网络互连而成的计算机网络。在这些网络之间的通信协议可以任意选择。
    - Internet（互联网/因特网）则是一个专用名词，指的是当前全球最大的，开放的，由众多网络相互连接而成的特定互连网，它采用 TCP/IP 协议族作为通信的规则，且前身是美国的 ARPANET。
    !!!note
        可见，把任意几个计算机网络互连起来（不管采用什么协议），并能够互相通信，这样构成的是一个互连网，而不是互联网。
=== "第二阶段：建成了**三级结构的互联网**"
    - 1985 年起，美国国家科学基金会 NSF 围绕六个大型计算机中心建设计算机网络 —— 国家科学基金网 NSFNET。
        * 是一个三级网络，分为**主干网、地区网和校园网（企业网）**。覆盖了全美国主要的大学和研究所，成为互联网中的主要组成部分。
    - 1991 年，NSF 和 其他美国政府机构，将互联网的主干网转交给私人公司来经营，开始对接入互联网的单位收费。
        * 1992 年互联网上的主机超过 100 万台。1993 年互联网主干网的速率提高到 45 Mbit/s（T3速率）。
    !!!note
        也就是说，互联网在这时才真正出现。
    ???question "为什么使用这种三级结构"
        是因为互联网必须能够让连接到互联网的所有用户能够互相通信。一个普通的校园网或者企业网很难做到，实现需要巨大的投资。地区网让本地区管辖范围内的各校园网或企业网之间相互通信，而主干网使不同地区之间的用户和相互通信。
=== "第三阶段：逐渐形成了**全球范围内的多层次 ISP 结构的互联网**"
    - 1993 年开始，NSFNET 逐渐被各个商用的**互联网主干网**替代，政府机构不再负责互联网的运营。
        - 出现了一个新的名词：**互联网服务提供者 ISP**（Internet Service Provider），又叫网络服务提供商。
        !!!example
            中国电信、中国联通和中国移动等公司都是我国最有名的 ISP。
    - ISP 可以从互联网管理机构申请到很多 IP 地址（互联网上的主机都必须有 IP 地址才能上网），同时拥有通信线路（大 ISP 自己建造通信线路，小 ISP 向电信公司租用通信线路）以及路由器等连网设备，因此任何机构和个人只要向某个 ISP 交纳规定的费用，就可从该 ISP 获取所需 IP 地址的租用权，并可通过该 ISP 接入互联网。IP 地址的管理机构会把整块的 IP 地址有偿租赁给经审查合格的 ISP。现在的互联网是全世界大大小小的 ISP 所共同拥有的，这就是互联网也称为**“网络的网络”**的原因。  
    !!!note
        所谓“上网”就是指“（通过某 ISP 获得的 IP 地址）接入互联网”。
    - 根据提供服务范围的覆盖面积大小以及所拥有的 IP 地址数目的不同，ISP 分为三个层次：
        - 主干 ISP：
            - 只有十几个；
            - 由几个专门的公司创建和维护，服务面积最大（一般都能够覆盖国家范围），并且拥有高速主干网（例如 10 Gbit/s 或更高）。不同的网络运营商都有自己的主干 ISP 网络，并且可以彼此互通。
        - 地区 ISP：
            - 一些较小的 ISP；
            - 通过一个或多个主干 ISP 连接起来。它们位于等级中的第二层，数据率也低一些。
        - 本地 ISP：
            - 给用户提供直接的服务（这些用户有时也称为端用户，强调是末端的用户）。
            - 本地 ISP 可以连接到地区 ISP，也可以直接连接到主干 ISP。绝大多数的用户都是连接到本地 ISP 的。本地 ISP 可以是一个仅仅提供互联网服务的公司，也可以是一个提供网络并向自己的雇员提供服务的企业，或者是一个运行自己的网络的非营利机构（如学院或大学）。
    !!!question "随着互联网上数据流量的急剧增长，应当如何更快的转发分组，以及如何更加有效和更加经济地利用网络资源"
    - **互联网交换点 IXP** 应运而生
        - 主要作用就是允许两个网络直接相连并交换分组，不需要再通过第三个网络来转发分组。
        - 使得互联网上的数据流量分布更加合理，减少了分组转发的迟延时间，降低了分组转发的费用。
        - 许多 IXP 在进行对等交换分组时，都互相不收费，但是本地 ISP 或地区 ISP 通过 IXP 向高层的 IXP 转发分组时，则需要交纳一定的费用。
        - 典型的 IXP 由一个或多个网络交换机组成，许多 ISP 再连接到这些网络交换机的相关端口上。IXP 常采用工作在数据链路层的网络交换机，这些网络交换机都用局域网互连起来。
        - 目前互联网上最主要的流量就是视频文件的传送。**内容提供者**是在互联网上向所有用户提供视频文件的公司。由于传送视频文件产生的流量非常大，为了提高数据传送的效率，这些公司都有独立于互联网的专门网络（仅承载出入该公司的服务器的流量），并且能够和各级 ISP 以及 IXP 相连。这就使得互联网上的所有用户能够更加方便地观看网上的各种视频节目。
互联网已经成为世界上规模最大和增长速度最快的计算机网络。由欧洲原子核研究组织 CERN 开发的**万维网 WWW（World Wide Web）**被广泛使用在互联网上，大大方便了广大非网络专业人员对网络的使用。
### 1.2.3 互联网的标准化工作
互联网的标准化工作对互联网的发展起到了非常重要的作用。但是国际标准的制定是一个非常复杂的问题，这里既有很多技术问题，也有很多非技术问题，如不同厂商之间经济利益的争夺问题，标准制定的时机也很重要。  

- 1992 年由于互联网不再归美国政府管辖，因此成立了一个国际性组织叫做**互联网协会**（ISOC），ISOC 下面有一个技术组织叫做**互联网体系结构委员会 IAB**，负责管理互联网有关协议的开发。IAB 下面又设有两个工程部：
    1. **互联网工程开发部 IETF**
        **IETF** 是由许多**工作组 WG**（Working Group）组成的论坛，具体工作由**互联网工程指导小组 IESG**管理。这些工作划分为若干个领域，每个领域集中研究某一特定的短期和中期的工程问题，主要针对协议的开发和标准化。
    2. **互联网研究部 IRTF**  
        **IRTF** 是由一些**研究组 RG**（Research Group）组成的论坛，具体工作由**互联网研究指导小组 IRSG**管理。**IRTF** 的任务是研究一些需要长期考虑的问题，包括互联网的一些协议、应用、体系结构等。        
- 互联网制定其标准时有一个很大的特点就是面向公众。所有的互联网标准都是以 RFC（请求评论） 的形式在互联网上发表的。这种开放方式对互联网的迅速发展影响很大。并非所有的 RFC 文档都是互联网标准，只有很少部分的最后能变成互联网标准。RFC 文档按发表时间的先后编上序号（即 RFC xxxx），一个 RFC 文档更新后就使用一个新的编号，并在文档中指出原来老编号的 RFC 文档已成为陈旧的或被更新，但陈旧的 RFC 文档不会被删除，会永远保留着。
- 制定互联网的正式标准的三个阶段：
    - **互联网草案**（Iternet Draft）：互联网草案的有效期只有 6 个月。在这个阶段还不能算是 RFC 文档。
    - **建议标准**（Proposed Standard）：从这个阶段开始就成为 RFC 文档。
    - **互联网标准**（Internet Standard）：如果经过长期的检验，证明了某个建议标准可以成为互联网标准，就给它分配一个标准编号，记为 STDxx（standard），一个互联网标准可以和多个 RFC 文档关联。
## 1.3 互联网的组成  
互联网在地理上覆盖了全球，但从其工作方式上看，可以划分为以下两大块：  

- **边缘部分** 有所有连接在互联网上的主机组成，这部分是**用户直接使用的**，用来进行通信和资源共享。
- **核心部分** 由大量网络和连接这些网络的路由器组成。这部分是**为边缘部分提供服务的**。
### 1.3.1 边缘部分
1. 处在互联网边缘的部分就是连接在互联网上的所有的主机。这些主机又称为**端系统**。
2. 小的端系统可以是一台普通的个人电脑，也可以是智能手机，甚至是很小的网络摄像头，而大的端系统则可以是一台非常昂贵的大型计算机（通常称为**服务器 server**）。
3. 端系统的拥有者可以是个人，单位也可以是某个 ISP。
4. 现今大部分可以向网民提供信息检索，万维网浏览以及视频播放等功能的服务器，都不再是一个服务器，而是属于某个大型数据中心.  

    !!!example
        谷歌公司（Google）拥有上百个数据中心，而其中的 15 个大型数据中心，每一个都有 10 万台以上的服务器。我国的百度公司在山西阳泉建造的数据中心拥有 16 万台服务器。  
    
5. “主机 A 和主机 B 进行通信”实际上是指：“运行在主机 A 上的某个程序和运行在主机 B 上的另一个程序进行通信”。“进程”就是“运行着的程序”。因此这也就是指：**“主机 A 的某个进程和主机 B 上的另一个进程进行通信”**。简称为**“计算机之间通信”**。
6. 在网络边缘的端系统之间的通信方式分为两大类：
    - **客户-服务器方式（C/S 方式）**
        - 最常用的，最传统的方式。
        - 计算机通信的对象是应用层中的应用进程。
        - **客户（client）**和**服务器（server）**都是指通信中所涉及的两个应用进程。客户-服务器方式所描述的是进程之间服务和被服务的关系。
        - **客户是服务请求方，服务器是服务提供方**。
        - 在实际应用中，客户程序和服务器程序还通常具有以下特点：
            - 客户程序：  
                1. 被用户调用后运行，在通信时主动向远地服务器发起通信（请求服务），客户程序必须知道服务器程序的地址。
                2. 不需要特殊的硬件和很复杂的操作系统。
            - 服务程序：
                1. 一种专门用来提供某种服务的程序，**可同时处理**多个远地或本地客户的请求。
                2. 系统启动后即一直不断地运行着，被动地等待并接受来自各自的客户的通信请求。
                3. 一般需要有强大的硬件和高级的操作系统支持。
            客户与服务器的通信关系建立后，通信可以是双向的，客户和服务器都可发送和接受数据。  
    !!!note
        上面所说的**客户和服务器本来都指的是计算机进程（软件）**。使用计算机的人是计算机的“用户（user）”而不是“客户（client）”。很多国外文献，把运行客户程序的**机器**称为 client（客户机），运行服务器程序的**机器**也称为 server。所以需要根据上下文判断是软件还是硬件。
    - **对等连接方式（P2P 方式）**
        - **对等连接**是指两台主机在通信时，并不区分谁是服务请求方或谁是服务提供方，只要双方都运行了对等连接软件（P2P 软件），它们就可以平等的对等连接通信，都可以下载对方存储在硬盘中的共享文档。  
        - 实际上本质上对等连接方式仍然是客户-服务器方式，只是对等连接的主机既是客户同时又是服务器。
        - 对等连接工作方式可支持大量对等用户（如上百万个）同时工作。
### 1.3.2 互联网的核心部分
网络核心部分是互联网中最复杂的部分，因为网络中的核心部分要向网络边缘部分中的大量主机提供连通性，使边缘部分中的任何一台主机都能够与其他主机通信。  
在网络核心部分起特殊作用的是**路由器（router）**，是一种专用计算机（不是主机）。路由器是实现**分组交换（packet switching）**的关键构件，其任务是**转发收到的分组**，这是网络核心部分最重要的功能。  

- **电路交换的主要特点**
    - 从通信资源的分配角度来看，**交换**就是按照某种方式动态地分配传输线路的资源。在一次通话过程中经历了三个阶段 —— **“建立连接（占用通信资源）-> 通话（一直占用通信资源）-> 释放连接（归还通信资源）”**，这种交换方式称为**电路交换**。
    - **在通话的全部时间内，通话的两个用户始终占用端到端的通信资源**。  

    !!! tip
        使用电路交换来传送计算机数据，**线路的传输效率往往很低**，这是因为计算机数据是突发式地出现在传输线路上的，线路经常被占用但是用来传输数据的时间往往不到 10%。  

- **分组交换的主要特点**  
    - 分组交换采用**存储转发**技术。
    - 通常我们把要发送的整块数据称为一个**报文（message）**。
    - 在发送报文之前，先把较长的报文划分成一个个更小的等长数据段。  
    !!! example
        每个数据段为 1024 bit。在每一个数据段前面，加上一些必要的控制信息组成的**首部（header）（包头）**，就构成了一个**分组（packet）（包）**。
    - 分组是在互联网中传送的数据单元。分组的“首部”非常重要，包含了诸如目标地址和源地址等重要控制信息，每一个能够在互联网中独立地选择传输路径，并被正确地交付到分组传输的终点。  
    - **主机**和**路由器**作用：  
        - 主机：是**为用户进行信息处理的**，并且可以和其他主机通过网络交换信息。
        - 路由器：**用来转发分组（分组交换）**。  
    - 数据传输过程：  
        路由器收到分组，暂时存储后，检查首部，查找转发表，按照首部中的目标地址，找到合适的接口转发出去，把分组交给下个路由器，到最终的主机之前，可能需要经过很多个路由器。各个路由器必须经常交换彼此掌握的路由信息，以便创建和动态维护路由器中的转发表，使得转发表能够及时更新。  
    - 讨论路由器转发分组时，可以把单一的网络简化为一条**链路**，而路由器成为核心部分的**节点**。
    - 主机与路由器的链路也只有在转发分组时才被占用，其余时间可以被别的主机使用。  
    - 路由器暂时存储的是一个个短分组，而不是整个长报文，短分组暂存在路由器的存储器（内存）而不是存储在磁盘，保证了较高的转换速率。
    - 分组转换只有在传输数据时才占用通信资源，分组在传输时逐段地占用通信资源，省去了建立连接和释放连接的开销，数据的传输速率更高。
    - 如果有某些节点或者链路出现问题，在各个路由器中运行的路由选择**协议**能够自动找到转发分组的最合适路径。
    - 总结，分组交换的优点：  
        - **高效**：在分组传输的过程中动态分配传输带宽，对通信链路逐段占用。
        - **灵活**：为每一个分组独立地选择最合适的转发路由。  
        - **迅速**：以分组作为传送单位，不先建立连接就能够向其他主机发送分组。
        - **可靠**：保证可靠性的网络协议：分布式多路由的分组交换网，使网络有很好的生存性。  
    - 带来的问题：  
        - **时延**：分组在各路由器存储转发时需要排队。
        - **带宽**：分组交换不像电路交换那样通过建立连接来保证通信时所需的各种资源，因而无法确保通信时端到端所需的带宽。
        - **开销**：各分组必须携带控制信息。
    - 三种交换方式的主要特点：  
        - **电路交换** —— 整个报文的比特流连续地从源点直达终点，好像在一个管道中传送。
        - **报文交换** —— 整个报文先传送到相邻节点，全部存储下来后找到转发表，转发到下一个节点。
        - **分组交换** —— 单个分组（报文的一部分）传送到相邻节点，存储下来后查找转发表，转发到下一个节点。  
## 1.4 计算机网络在我国的发展（简单了解即可）
1. 最早着手建设专用计算机广域网的是铁道部。  
2. 1994 年 4 月 20 日我国用 64 kbit/s 专线正式连入互联网，从此，我国被国际上正式承认为接入互联网的国家。  
3. 同年五月中国科学院高能物理研究所设立了我国的第一个万维网服务器。
4. 同年九月中国公用计算机互联网 CHINANET 正式启动。
## 1.5 计算机网络的定义
### 1.5.1 计算机网络的定义
1. 计算机网络主要是由一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的的（例如，传送数据或视频信号）。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用。  
    - 计算机网络所连接的硬件，并不限于计算机，包括智能手机或智能电视；
    - 计算机网络并非专门用来传送数据，而是能够支持多种应用。  
    !!!note 
        上述“可编程的硬件”表明这种硬件一定含有中央处理器 CPU。  
### 1.5.2 几种不同类别的计算机网络  
1. **按照网络的作用范围进行分类**  
    - **广域网 WAN**（Wide Area Network）（**远程网** long haul network）  
        作用范围通常几十到几千公里，是互联网的核心部分，任务是长距离运送主机所发送的数据。连接广域网各节点交换机的链路一般都是高速链路，具有较大的通信容量。  
    - **城域网 MAN**（Metropolitan Area Network）  
        作用范围一般是一个城市，可跨越几个街区甚至整个城市，其作用距离约为 5 ～ 50 km。城域网可被一个或几个单位拥有，也可以是一种公用设施，用来将多个局域网互连。目前很多城域网采用的是以太网技术。  
    - **局域网 LAN**（Local Area Network）  
        一般用微型计算机或工作站通过高速通信线路相连，但地理上则局限在较小的范围。  
    - **个人区域网 PAN**（Personal Area Network）（**无线个人区域网 WPAN**（Wireless PAN））    
        一般就是个人使用的电子设备用无线技术连接起来的网络，范围更小，大约 10 m 左右。  
    !!!note  
        若中央处理器之间的距离非常近，则一般就称为**多处理系统**。  
2. **按照网络的使用者进行分类**  
    - **公用网**（public network）  
        电信公司出资建造的大型网络。  
    - **专用网**（private network）  
        某个部门为满足本单位的特殊业务工作的需要而建造的网络。  
3. **用来把用户接入到互联网的网络**  
    **接入网 AN**（Access Network）（**本地接入网**或**居民接入网**）  
    实际上就是本地 ISP 所拥有的网络，接入网既不是互联网的核心部分，也不是互联网的边缘部分。接入网由某个端系统连接到本地 ISP 的第一个路由器之间的一些物理链路组成。长度在几百米到几公里之间。很多接入网仍然属于局域网。接入网只是起到让用户能够与互联网连接的“桥梁”作用。  
## 1.6 计算机网络的性能  
### 1.6.1 计算机网络的性能指标  
1. **速率**  
    - 计算机发送的信号都是数字形式的。
    - **比特**（bit）来源于 binary digit（**二进制数字**），比特就是二进制数字的一个 1 或 0，比特也是信息论中的**信息量的单位**。
    - **速率**指的是**数据的传送速率**（**数据率**（data rate）或**比特率**（bit rate））。
    - 单位是 bit/s（比特每秒）（或 b/s，bps，即 bit per second）。数据率较高时，就在 bit/s 前面加上一个字母，例如，k (kilo) = $10^3$ = 千，M (Mega) = $10^6$ = 兆，G (Giga) = $10^9$ = 吉，T (Tera) = $10^{12}$ = 太，P (Peta) = $10^{15}$ = 拍，E (Exa) = $10^{18}$ = 艾，Z (Zetta) = $10^{21}$ = 泽，Y (Yotta) = $10^{24}$ = 尧。$4 \times 10^{10} \ bit/s$ 记为 40 Gbit/s。  
    - 当提到网络的速率时，往往指的是**额定速率**或**标定速率**，也就是数据传输的理想情况。  
2. **带宽**  
    - “**带宽**”有以下两种不同的意义：  
        - 带宽本来就是指**某个信号具有的频带宽度**。信号的带宽是指该信号所包含的各种不同频率成分所占据的频率范围。单位是**赫**（或**千赫**、**兆赫**、**吉赫**）。表示某信道允许通过的信号频率范围就称为该信道的**带宽**（或**通频带**）。  
        - 计算机网络中，带宽用来表示网络中某**通道**传送数据的能力，因此网络带宽表示在**单位时间**内网络中的某信道所能通过的“**最高数据率**”。单位是**数据率的单位 bit/s，是“比特每秒”**。  
        - 前者是**频域**称谓，后者为**时域**称谓，本质是相同的，一条通信链路的“带宽”越宽，其所能传输的“最高数据率”也越高。  
    !!!note  
        在计算机领域，习惯上，千 = k = $2^{10}$ = 1024，兆 = M = $2^{20}$，吉 = G = $2^{30}$，太 = T = $2^{40}$，拍 = P = $2^{50}$，艾 = E = $2^{60}$，泽 = Z = $2^{70}$，尧 = Y = $2^{80}$。计算机中的数据量往往用字节 B 作为度量的单位（B 代表 byte）。通常 1 B = 8 bit。  
        !!!example  
            15 GB 数据块的大小是 $15 \times 2^{30} \times 8 \ bit$，而不是 $15 \times 10^9 \times 8 \ bit$，但是 10 Gbit/s 的速率则表示 $10 \times 10^9 \ bit/s$。  
    计算机领域，所有的这些单位都使用大写字母，但是在通信领域，只有 “1000” 使用小写 “k”，其余都是大写。  
3. **吞吐量**  
    - **吞吐量**（throughput）表示在**单位时间**内通过某个网络（或信道、接口）的**实际数据量**。  
    - 吞吐量受网络带宽或网络额定速率的限制。  
    !!!example 
        一个 1 Gbit/s 的以太网，就是说其额定速率是 1 Gbit/s，那么这个数值也是该以太网的吞吐量的绝对上限值。但是实际的吞吐量可能只有 100 Mbit/s。  
    !!!note  
        有时候吞吐量还可用每秒传送的字节数或帧数来表示。  
    - 接入到互联网的主机的实际吞吐量，取决于互联网的具体情况。  
        - 第一种情况：假定主机 A 和服务器 B 接入到互联网的链路速率分别是 100 Mbit/s 和 1 Gbit/s 。如果互联网的各链路的容量都满足，那么 A 和 B 交换数据时，吞吐量显然是 100 Mbit/s，这种时候的吞吐量受主机 A 的限制，因为主机 A 接收数据的速率较小。  
        - 第二种情况：继续第一种情况的假定，如果服务器 B 被 100 个用户同时连接，那么链路容量要被 100 个用户平分，每个用户只有 10 Mbit/s 的带宽，主机 A 连接到服务器 B 的吞吐量就只有 10 Mbit/s。  
    - 如果互联网的某处发生了严重的拥塞，则可能导致主机 A 暂时收不到服务器发来的数据，那么吞吐量就是零。  
4. **时延**  
    - **时延**（delay 或 latency）（**延迟**或**迟延**）是指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间。  
    - 时延由以下部分组成：  
        - **发送时延** (transmission delay)  
            - **是主机或路由器发送数据帧所需要的时间**。  
            - 计算公式：$发送时延 = \frac{数据帧长度(bit)}{发送速率(bit/s)}$
        - **传播时延** (progagation delay)
            - **是电磁波在信道中传播一定的距离需要花费的时间**。
            - 计算公式：$传播时延 = \frac{信道长度(m)}{电磁波在信道上的传播速率(m/s)}$
        ???note "上述两种时延的区分"
            发送时延发生在机器内部的发送器中，**与传输信道的长度（或信号传送的距离）没有关系**。  
            传播时延发生在机器外部的传输信道媒体上，**与信号的发送速率无关，信号传送的距离越远，传播时延就越大**。
        - **处理时延** 
            - 主机或路由器在接收到分组时要花费一定的时间去处理，例如分析分组的首部，从分组中提取数据部分，进行差错检验或查找转发表。
        - **排队时延**
            - 分组在经过网络传输是，要经过许多路由器，但分组在进入路由器后要现在输入队列中排队等待处理。在路由器确定了转发接口后，还要在输出队列中排队等待转发。
            - 排队时延的长短往往取决于网络当时的通信量。
            - 当网络的通信量很大时会发生队列溢出，使分组丢失，此时的排队时延无限大。
        - 总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延
        - 一般来说，小时延的网络优于大时延的网络，某些情况下，一个低速率、小时延的网络可能优于高速率但大时延的网络。
    - **对于高速网络链路，提高的仅仅是数据的发送速率而不是比特在链路上的传播速率**。
    - 荷载信息的电磁波在通信线路上的传播速率取决于通信线路的介质材料。
    - **提高数据的发送速率只是减小了数据的发送时延**。
5. **时延带宽积**
    - 计算公式 = 传播时延 $\times$ 带宽
    - 时延带宽积表示的是链路可容纳多少个比特，类似于计算体积。
    - 又称为**以比特为单位的链路长度**。
6. **往返时间 RTT**
    - 数据传输不仅仅是单方向传输而是双向交互的，因此会存在往返时间 RTT。
    - 互联网中，往返时间包括各中间节点的处理时延、排队时延以及转发数据时的发送时延。
7. **利用率**  
    - **利用率**有信道利用率和网络利用率两种。
        - 信道利用率指的是某信道有百分之几的时间是被利用的（有数据通过）。
        - 网络利用率指的是全网络的信道利用率的加权平均值。
    - 某信道利用率增大时，该信道引起的时延也就迅速增加。
    - 令 $D_0$ 表示网络空闲时的时延，$D$ 表示网络当前的时延，现在的网络利用率为 $U$，则有  
        $D = \frac{D_0}{1-U}$
    - **信道利用率或网络利用率过高就会产生非常大的时延**。
### 1.6.2 计算机网络的非性能特征  
1. **费用**  
    网络的价格（设计和实现的费用）都需要考虑。
2. **质量**
    网络的质量取决于网络中所有构件的质量，以及这些构件是怎样组成网络的。
3. **标准化**  
    网络的硬件和软件的设计需要按照国际标准或遵循特定的专用网络标准。
4. **可靠性**
    可靠性与网络的质量和性能都有密切关系。
5. **可拓展性和可升级性**
    拓展（规模扩大）升级（性能和版本的提高）
6. **易于管理和维护**
## 1.7 计算机网络体系结构
### 1.7.1 计算机网络体系结构的形成
- ARPANET 提出了**“分层”**设计的方法。
- 1974 年，美国的 IBM 公司宣布了**系统网络体系结构 SNA**。现在用 IBM 大型机构构建的专用网络仍在使用 SNA。
### 1.7.2 协议与划分层次
- **为进行网络中的数据交换而建立的规则、标准或约定**称为**网络协议**。由三个要素组成：  
    - **语法** 数据与控制信息的结构或格式；
    - **语义** 需要发出何种控制信息，完成何种动作以及做出何种响应；
    - **同步** 时间实现顺序的详细说明。
- **计算机网络的各层及其协议的集合**就是网络的**体系结构**。
### 1.7.3 具有五层协议的体系结构
- **应用层**  
    - 体系结构的最高层。
    - 任务是**通过应用进程间的交互来完成特定网络应用**。
    - 定义的是**应用进程间通信和交互的规则**。
    - **进程**就是主机中**正在运行的程序**。
    - 应用层协议很多，例如域名系统 DNS，支持万维网应用的 HTTP 协议，支持电子邮件的 SMTP 协议。
    - 应用层交互的数据单元称为**报文**。
- **运输层**
    - 任务是负责向**两台主机中进程之间的通信**提供**通用的数据传输**服务。
    - 主要使用两种协议：  
        - **传输控制协议 TCP** 提供面向连接的、可靠的数据传输服务，数据传输的单位是**报文段**。
        - **用户数据报协议 UDP** 提供无连接的**尽最大努力**的数据传输服务，数据传输的单位是**用户数据报**。
- **网络层（网际层或 IP 层）**
    - 任务是负责**为分组交换网上的不同主机提供通信服务**。
    - 在发送数据时，网络层把运输层产生的报文段或用户数据报段封装成**分组**或**包**进行传送。
    - 在 TCP/IP 体系中，分组也称为** IP 数据报**。
    - **无论在哪一层传送的数据单元，都可笼统地用“分组”来表示**。
    - 具体任务有两个：  
        - 通过一定的算法，为每一个路由器生成转发表。
        - 路由器接收分组之后，依据转发表将分组转发到下一个路由器。
- **（数据）链路层**
    - 数据链路层会将网络层交下来的 IP 数据报**组装成帧**，在相邻两个节点间的链路上传送**帧**。每一帧包括数据和必要的**控制信息**。
    - 控制信息还使接收端能够检测收到的帧有无差错。出现差错，则可以丢弃这个帧。并且数据链路层还要纠正出现的差错。
- **物理层**
    - 所传数据的单位是**比特**。
- OSI 参考模型把对等层次之间传送的数据单元称为该层的**协议数据单元 PDU**。
### 1.7.4 实体、协议、服务和服务访问点
- **实体**表示**任何发送或接收信息的硬件或软件进程**。
- **协议是控制两个对等实体（或多个实体）进行通信的规则的集合**。
- **在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。要实现本层协议，还需要使用下面一层所提供的服务**。
- **使用本层服务的实体只能看见服务而无法看见下面的协议**。
- **协议是水平的**，**服务是垂直的**。
- **服务访问点 SAP** 在同一系统中相邻两层的实体进行交互的地方。
- OSI 把层与层之间交换的数据的单位称为**服务数据单元 SDU**。
### 1.7.5 TCP/IP 的体系结构   